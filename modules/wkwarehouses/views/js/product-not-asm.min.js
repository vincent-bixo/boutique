/**
* NOTICE OF LICENSE
*
* This file is part of the 'Wk Warehouses Management' module feature.
* Developped by Khoufi Wissem (2018).
* You are not allowed to use it on several site
* You are not allowed to sell or redistribute this module
* This header must not be removed
*
*  @author    KHOUFI Wissem - K.W
*  @copyright Khoufi Wissem
*  @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*/
function initCartButton(){$("#add-to-cart-or-refresh button.add-to-cart").on("click",function(t){var a,o,n,i,r;return t.preventDefault(),t.stopPropagation(),a=$("#product_page_product_id").val(),o=$("#id_customization").val(),void 0===(n=getWkEmbeddedProductDetails())&&(n=0),(i=void 0!==$("#quantity_wanted")&&$("#quantity_wanted").length?parseInt($("#quantity_wanted").val()):1)<1?(fancyCloseBox(txt_invalid_qty,"danger"),!1):(r={ajax:!0,action:"assignProductInCart",id_product:a,id_product_attribute:n},$.ajax({url:process_cart_url,type:"POST",dataType:"json",data:r,success:function(t){if(void 0!==t.isMultiCarriersInCart&&t.isMultiCarriersInCart)fancyCloseBox(t.message,"danger");else{var r={ajax:1,add:1,action:"update",id_product:a,id_customization:o,qty:i,token:prestashop.static_token};n>0&&(r.id_product_attribute=n),$.post(prestashop.urls.pages.cart,r,null,"json").then(function(t){prestashop.emit("updateCart",{reason:{idProduct:t.id_product,idProductAttribute:t.id_product_attribute,idCustomization:t.id_customization,linkAction:"add-to-cart",cart:t.cart},resp:t})}).fail(function(t){prestashop.emit("handleError",{eventType:"addProductToCart",resp:t})})}}}),!1)})}function fancyCloseBox(t,a){var o='<p style="text-align:right; padding-bottom: 0" class="submit">';o+='<input type="button" onclick="$.fancybox.close();" value="'+txt_ok+'" class="button btn btn-danger">',o+="</p>",$.fancybox('<div class="alert alert-'+a+'">'+t+"</div>"+o)}$(document).ready(function(){null!=window.prestashop&&prestashop.on("updatedProduct",function(t){initCartButton()}),initCartButton()});
